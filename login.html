<!doctype html>
<html lang="en">
  <head>
    <title>Login - owntheSTREETS</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="bg-black text-gray-900 flex flex-col min-h-screen">
    <!-- Announcement Bar -->
    <div class="bg-black border-b border-gray-800 overflow-hidden">
      <div
        class="announcement-slide whitespace-nowrap py-2 text-center text-sm font-bold text-white"
      >
        <span class="inline-block px-8">FREE SHIPPING ON ORDERS $50+</span>
        <span class="inline-block px-8">|</span>
        <span class="inline-block px-8">HOLIDAY SALE - UP TO 40% OFF</span>
        <span class="inline-block px-8">|</span>
        <span class="inline-block px-8">NEW ARRIVALS DAILY</span>
      </div>
    </div>

    <!-- Navigation -->
    <nav
      id="navbar"
      class="sticky top-0 z-50 bg-black text-white transition-all duration-300"
    >
      <div class="container mx-auto px-4">
        <div class="flex items-center justify-between gap-3 py-3 sm:py-4">
          <!-- Logo -->
          <div class="flex items-center min-w-0">
            <a
              href="index.html"
              class="text-lg sm:text-xl md:text-2xl lg:text-3xl font-black tracking-tight truncate"
            >
              owntheSTREETS
            </a>
          </div>

          <!-- Desktop Navigation -->
          <div class="hidden lg:flex items-center space-x-8">
            <!-- Navigation Links Removed for Login Page -->
          </div>

          <!-- Right Icons -->
          <div class="flex items-center flex-shrink-0 space-x-4 sm:space-x-6">
            <!-- Basic Nav Icons only -->
          </div>
        </div>
      </div>
    </nav>

    <!-- Login Section -->
    <section
      class="flex-grow flex items-center justify-center bg-black text-white py-20 px-4"
    >
      <div class="w-full max-w-md space-y-8">
        <div class="text-center">
          <h2 class="text-3xl font-black tracking-tight">WELCOME BACK</h2>
          <p class="mt-2 text-sm text-gray-400">
            Please sign in to your account
          </p>
        </div>

        <form class="mt-8 space-y-6" id="login-form">
          <div class="space-y-4">
            <div>
              <label for="email" class="sr-only">Email address</label>
              <input
                id="email"
                name="email"
                type="email"
                autocomplete="email"
                required
                class="appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-700 bg-gray-900 placeholder-gray-500 text-white focus:outline-none focus:ring-white focus:border-white focus:z-10 sm:text-sm"
                placeholder="Email address"
              />
            </div>
            <div class="relative">
              <label for="password" class="sr-only">Password</label>
              <input
                id="password"
                name="password"
                type="password"
                autocomplete="current-password"
                required
                class="appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-700 bg-gray-900 placeholder-gray-500 text-white focus:outline-none focus:ring-white focus:border-white focus:z-10 sm:text-sm pr-10"
                placeholder="Password"
              />
              <button
                type="button"
                id="toggle-password"
                class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white"
              >
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>

          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <input
                id="remember-me"
                name="remember-me"
                type="checkbox"
                class="h-4 w-4 text-white focus:ring-white border-gray-600 rounded bg-gray-900"
              />
              <label for="remember-me" class="ml-2 block text-sm text-gray-400">
                Remember me
              </label>
            </div>

            <div class="text-sm">
              <a
                href="forgot-password.html"
                class="font-medium text-gray-400 hover:text-white transition-colors"
                >Forgot your password?</a
              >
            </div>
          </div>

          <div>
            <button
              type="submit"
              class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-full text-black bg-white hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white transition-colors"
            >
              SIGN IN
            </button>
          </div>

          <div
            id="login-error"
            class="text-red-500 text-sm text-center hidden"
          ></div>
        </form>

        <div class="text-center text-sm text-gray-400">
          Don't have an account?
          <a
            href="signup.html"
            class="font-medium text-white hover:underline underline-offset-4"
            >Sign up</a
          >
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black text-white py-12 border-t border-gray-800">
      <div class="container mx-auto px-4 text-center text-gray-400 text-sm">
        <p>Â© 2024 owntheSTREETS Co., LLC. All Rights Reserved.</p>
      </div>
    </footer>

    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.min.js"></script>
    <script src="js/supabase-client.js"></script>
    <script src="js/utils.js"></script>
    <script>
      document
        .getElementById("toggle-password")
        .addEventListener("click", function () {
          const passwordInput = document.getElementById("password");
          const icon = this.querySelector("i");

          if (passwordInput.type === "password") {
            passwordInput.type = "text";
            icon.classList.remove("fa-eye");
            icon.classList.add("fa-eye-slash");
          } else {
            passwordInput.type = "password";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye");
          }
        });

      document
        .getElementById("login-form")
        .addEventListener("submit", async (e) => {
          e.preventDefault();
          const email = document.getElementById("email").value;
          const password = document.getElementById("password").value;
          // Remember Me Logic (Optional: Pass to Auth or store locally if using session)
          const rememberMe = document.getElementById("remember-me").checked;

          // Supabase handles session persistence automatically by default,
          // but we can explicitly set persistence if needed.
          // For now, we just proceed with login.

          const result = await Auth.login(email, password);
          if (result.success) {
            if (email.toLowerCase() === "admin@ownthestreets.com") {
              window.location.href = "admin.html";
            } else {
              window.location.href = "profile.html";
            }
          } else {
            const errorEl = document.getElementById("login-error");
            errorEl.textContent = result.message;
            errorEl.classList.remove("hidden");
          }
        });
    </script>
  </body>
</html>
